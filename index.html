<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="player.css">
</head>

<body>

  <div id="player-app">
    <div
      style="display: flex;flex-direction: column;align-items: center;gap: 1.5rem;padding: 2rem;aspect-ratio: 16/9;max-width: 800px;margin: auto;;">

      <div
        style="
        width: 100%; height: auto; aspect-ratio: 16/9;
        display: flex; border-radius: 0.5rem; overflow: hidden; box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1); position: relative;">

        <div v-if="!isReady"
          style="width: 100%; height: 100%; display: flex; align-items: center;justify-content: center;background-color: rgb(243 244 246 / var(--tw-bg-opacity, 1)); position: absolute;">
          <span class="loader"></span>

        </div>

        <div v-show="!isReady" id="player"></div>
      </div>

      <div v-if="isReady" style="display: flex; gap: 1.5rem;">
        <button v-for="({id, label}) of videoIds" :class="[ id === current ?  'active': '']" class="change_lang">
          {{label}}
        </button>
      </div>

    </div>
  </div>

  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

  <script>
    window.player = undefined

    const { createApp, reactive, ref, onMounted } = Vue

    const app = createApp({
      setup() {
        const player = ref(null)
        const isReady = ref(false)
        const current = ref(null)

        const videoIds = reactive({
          english: {
            id: 'english',
            label: 'English',
            videoId: 'embb9SMJ7ig'
          },
          spanish: {
            id: 'spanish',
            label: 'EspaÃ±ol',
            videoId: 'ugR5oJnZqmE'
          },
          portuguese: {
            id: 'portuguese',
            label: 'portuguese',
            videoId: 'jfKfPfyJRdk'
          },
          french: {
            id: 'french',
            label: 'french',
            videoId: 'UxZdYDLqkxU'
          },
        })

        onMounted(() => {
          window.onYouTubeIframeAPIReady = () => {
            console.log('onYouTubeIframeAPIReady')

            player.value = new YT.Player('player', {
              autoplay: 1,
              width: '100%',
              height: '100%',
              enablejsapi: 1,
              fs: 1,
              modestbranding: 1,
              rel: 0,
              showinfo: 0,
              videoId: videoIds.spanish.videoId,
              events: {
                onReady: () => {
                  console.log('onReady')
                  isReady.value = true
                  current.value = 'spanish'
                }
              }
            });

          }

          loadYouTubeAPI()
        })

        return { player, isReady, videoIds, current }
      }
    }).mount('#player-app')

    function loadYouTubeAPI() {
      console.log('Loading YouTube API...')
      const tag = document.createElement('script');
      tag.src = "https://www.youtube.com/iframe_api";
      const firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    }






  </script>

</body>

</html>